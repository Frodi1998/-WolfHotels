function isiPhone(){return((navigator.platform.indexOf("iPhone")!=-1)||(navigator.platform.indexOf("iPod")!=-1)||(navigator.platform.indexOf("iPad")!=-1));}
var windowHeight,windowWidth,documentHeight,scrollArea,imgBgDiff,bgHeight,bgWidth,bgScaledHeight,$body=jQuery("body");function updateBgAttr(){var bg=$body.css('background-image');if(bg!=="undefined"&&bg!=="none"){bg=bg.replace('url(','').replace(')','').replace(/\"/gi,"");var img=new Image();img.onload=function(){bgHeight=this.height;bgWidth=this.width;}
img.src=bg;}
setTimeout(function(){updatePositions();},500);}
function updatePositions(){windowHeight=jQuery(window).height();windowWidth=jQuery(window).width();documentHeight=jQuery(document).height();scrollArea=documentHeight-windowHeight;bgScaledHeight=Math.round((windowWidth/bgWidth)*bgHeight);imgBgDiff=bgScaledHeight-windowHeight;}
jQuery(document).ready(function(){updateBgAttr();setTimeout(function(){updatePositions();},500);jQuery(window).resize(function(){updatePositions()});jQuery(window).scroll(function(event){if(windowHeight<bgScaledHeight){var scroll=jQuery(window).scrollTop();var docDiff=(documentHeight-windowHeight);var scrollDiff=(scroll/docDiff);var bgDiff=(bgScaledHeight-windowHeight);var top=bgDiff*scrollDiff;$body.css("background-position","center -"+top+"px");}
else{$body.css("background-position","center top");}});});jQuery(function($){if(window.wp_data.booking_enabled!='1'&&jQuery("#currentUser").val()!='sagrou89@gmail.com'){$('.menu__item__button-transparent').remove();$('a[data-show-booking="true"]').remove();$('.search-room-price').remove();}
$('.menu__item__button-transparent a, a[data-show-booking="true"]').on('click',function(event){event.preventDefault();if(window.wp_data.booking_enabled=='1'||jQuery("#currentUser").val()=='sagrou89@gmail.com'){$('#booking-modal').modal('show');}})
$(document).on('click','a',function(event){var href=$(this).attr('href');if(href==window.wp_data.booking_page&&window.wp_data.booking_enabled!='1'&&jQuery("#currentUser").val()!='sagrou89@gmail.com'){event.preventDefault();event.stopPropagation();return false;}});$(document).on('submit','form.booking-form',function(event){if(window.wp_data.booking_enabled!='1'&&jQuery("#currentUser").val()!='sagrou89@gmail.com'){event.preventDefault();event.stopPropagation();return false;}})
$('form.booking-form input[type="submit"]').each(function(){if(window.wp_data.booking_enabled!='1'&&jQuery("#currentUser").val()!='sagrou89@gmail.com'){$(this).closest('.input-group').css({'visibility':'hidden','opacity':'0'});}});$('a').each(function(){if(window.wp_data.booking_enabled!='1'&&$(this).attr('href')==window.wp_data.booking_page&&jQuery("#currentUser").val()!='sagrou89@gmail.com'){$(this).css({'visibility':'hidden','opacity':'0'});}});if($('.menu-wrapper').length>0){$('.gallery-content').css('background','rgba(56, 43, 36, 1)');}
var paged=2;var ajax_processing=false;$(document).on('click','#load-more',function(event){event.preventDefault();if(ajax_processing)return false;ajax_processing=true;var btn=$(this),btn_text=btn.text(),btn_loading_text=btn.data('loading-text'),archive=btn.data('archive');btn.text(btn_loading_text);$.ajax({url:window.wp_data.ajax_url,method:'POST',dataType:'json',data:{action:'load_posts',paged:paged,archive:archive},error:function(){},}).done(function(jsonResponse){$('#news-wrapper').append(jsonResponse.data.html)
ajax_processing=false;btn.text(btn_text);if(!jsonResponse.data.have_more_pages){btn.remove();}
paged++;});});$('.vc-contact-form').on('submit',function(event){event.preventDefault();var form=$(this),wrapper=form.parent(),successWrapper=wrapper.find('p.success'),errorWrapper=wrapper.find('p.error');errorsMessages=form.data('errors');form.find('input[type="submit"]').prop('disabled',true);errorWrapper.hide();successWrapper.hide();$.ajax({url:window.wp_data.ajax_url,method:'POST',dataType:'json',data:{action:'send_form',input1:form.find('[name="input1"]').val(),input2:form.find('[name="input2"]').val(),input3:form.find('[name="input3"]').val(),input4:form.find('[name="input4"]').val(),to:form.find('[name="to"]').val()},error:function(){errorWrapper.slideDown(700);form.find('input[type="submit"]').prop('disabled',false);},}).done(function(jsonResponse){if(jsonResponse.success){successWrapper.slideDown(700);}else{errorWrapper.text(errorsMessages[jsonResponse.data.code]);errorWrapper.slideDown(700);}
form.find('input[type="submit"]').prop('disabled',false);});});$('.checkout-tooltip-more').on('click','a',function(event){if($(this).siblings('.checkout-tooltip-more__item').css('display')!='block'){$('.checkout-tooltip-more__item').slideUp(300);$('.checkout-tooltip-more').removeClass('tool-active');$(this).siblings('.checkout-tooltip-more__item').slideDown(300);$(this).closest('.checkout-tooltip-more').addClass('tool-active');}else{return false;}});$('.checkout-tooltip-more_close').on('click',function(event){$(this).closest('.checkout-tooltip-more__item').slideUp(300);$(this).closest('.checkout-tooltip-more').removeClass('tool-active');});function change_bg_next(){var check_dot=$('.background-changer__dot_active').next().is('.background-changer__dot');if(check_dot){$('.background-changer__dot_active').removeClass('background-changer__dot_active').next('.background-changer__dot').addClass('background-changer__dot_active');}else{return false;}}
function change_bg_prev(){var check_dot=$('.background-changer__dot_active').prev().is('.background-changer__dot');if(check_dot){$('.background-changer__dot_active').removeClass('background-changer__dot_active').prev('.background-changer__dot').addClass('background-changer__dot_active');}else{return false;}}
$('.background-changer').each(function(index,el){$(this).find('.background-changer__top').click(function(event){change_bg_prev();var bg=$('.background-changer__dot_active').data('bg');$('body').css('background','#402B10 url('+bg+') no-repeat fixed center top');updateBgAttr();});$(this).find('.background-changer__bottom').click(function(event){change_bg_next();var bg=$('.background-changer__dot_active').data('bg');$('body').css('background','#402B10 url('+bg+') no-repeat fixed center top');updateBgAttr();});});$('.hotel-slider').slick({dots:true,infinite:true,speed:300,slidesToShow:1,slidesToScroll:1,appendDots:$('.hotel-rotator'),responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});$('.mainpage-news').slick({dots:true,infinite:true,speed:300,slidesToShow:3,slidesToScroll:1,appendDots:$('.news-rotator'),responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});$('.slick-container').each(function(index,el){$(this).find('.rotator__left').click(function(event){$(this).closest('.slick-container').find('.slick-prev').click();});});$('.slick-container').each(function(index,el){$(this).find('.rotator__right').click(function(event){$(this).closest('.slick-container').find('.slick-next').click();});});$('.hamburger').click(function(event){$('.mobile').slideToggle(400);$(this).toggleClass('is-active');$('header').toggleClass('mobile-menu-is-active');$('body').toggleClass('body-mobile-menu-is-active');});$('.menu-item-has-children').click(function(event){var window_width=$(window).width();if(window_width<1200){$(this).find('.submenu-wrap').slideToggle(400);}});$('.switcher').each(function(index,el){$(this).click(function(event){$(this).find('.switcher-droplist').slideToggle(400);});});jQuery('<div class="quantity-nav"><div class="quantity-button quantity-up"></div><div class="quantity-button quantity-down"></div></div>').insertAfter('.quantity input');function count(selector){jQuery(selector).each(function(){var spinner=jQuery(this),input=spinner.find('input[type="number"]'),btnUp=spinner.find('.quantity-up'),btnDown=spinner.find('.quantity-down'),min=0,max=input.attr('max');btnUp.click(function(){var oldValue=parseFloat(input.val());if(oldValue>=max){var newVal=oldValue;}else{var newVal=oldValue+1;}
spinner.find("input").val(newVal);spinner.find("input").trigger("change");});btnDown.click(function(){var oldValue=parseFloat(input.val());if(oldValue<=min){var newVal=oldValue;}else{var newVal=oldValue-1;}
spinner.find("input").val(newVal);spinner.find("input").trigger("change");});});};count('.quantity');$('.close-ready').click(function(event){$('.ready-pages').fadeOut(300);});$(".recreation-rating").starRating({starSize:18,callback:function(currentRating,$el){}});var loadedCount=0;var imagesToLoad=$('img').length;var loadingProgress=0;$('img').imagesLoaded({background:true}).progress(function(instance,image){loadProgress();});function loadProgress(imgLoad,image)
{loadedCount++;loadingProgress=(loadedCount/imagesToLoad);TweenLite.to(progressTl,0.7,{progress:loadingProgress,ease:Linear.easeNone});}
$('.check-quest-data').on('change',function(event){var form=$(this).closest('.add-new-multiclient-form').find('.add-new-client-form');if($(this).prop('checked')==true){form.slideUp(400);}else{form.slideDown(400);}});var progressTl=new TimelineMax({paused:true,onUpdate:progressUpdate,onComplete:loadComplete});progressTl.to($('.progress span'),1,{width:100,ease:Linear.easeNone});function progressUpdate()
{loadingProgress=Math.round(progressTl.progress()*100);$(".txt-perc").text(loadingProgress+'%');$('.load-progress').css('width',loadingProgress+'%');}
function loadComplete(){var preloaderOutTl=new TimelineMax();preloaderOutTl.to($('.load-progress'),0.3,{y:100,autoAlpha:0,ease:Back.easeIn}).to($('.txt-perc'),0.3,{y:100,autoAlpha:0,ease:Back.easeIn},0.1).set($('body'),{className:'-=is-loading'}).set($('#intro'),{className:'+=is-loaded'}).to($('.txt'),0.7,{yPercent:100,ease:Power4.easeInOut}).set($('.txt'),{className:'+=is-hidden'}).from($('#intro .title'),1,{autoAlpha:0,ease:Power1.easeOut},'-=0.2').from($('#intro p'),0.7,{autoAlpha:0,ease:Power1.easeOut},'+=0.2').from($('.scroll-hint'),0.3,{y:-20,autoAlpha:0,ease:Power1.easeOut},'+=0.1');return preloaderOutTl;}
$("#reservation-form").submit(function(){var termsLabel=$(".agree-with-terms-label");if(termsLabel.find(".agree-with-terms").is(":checked")==false){termsLabel.addClass("error");return false;}else{$('#submit_reservation').attr('disabled','disabled');}});jQuery(".gallery-content .gallery-item").click(function(){var el=jQuery(this);el.find(".view-gallery > a:first")[0].click();});var $sinput=$('.starrr-input');$('.starrr').each(function(index,el){$(this).starrr({max:5,rating:$sinput.val(),change:function(e,value){$(this).closest('.rating-blocks__rating').find($sinput).val(value).trigger('input');}});});count_item=0;var count_isset_item=$('.multi-booking-modal-item').length;count_item=count_isset_item-1;room_id=0;$('.multi-booking-view').on('click',function(event){if($('.multi-booking-modal').hasClass('multi-booking-submit')){$('.multi-booking-modal').fadeToggle(400);toogle_item_switchers();}else{$('.multi-booking-modal').fadeToggle(400);$('.input-col-multi-booking').toggleClass('hide');$('.hide-on-multi-booking').toggleClass('hide');hide_delete_item(count_item);toogle_item_switchers();}});function add_multi_booking(){var sum_adult=0;var sum_child=0;var sum_mini_child=0;$('.multi-booking-modal-body input[name="adult_multi[]"]').each(function(){sum_adult+=Number($(this).val());});$('.multi-booking-modal-body input[name="child_multi[]"]').each(function(){sum_child+=Number($(this).val());});sum_rooms=$('.multi-booking-modal-item').length;var total_sum='Взрослых: '+sum_adult+', детей: '+sum_child;$('input[name=multi]').val(total_sum);}
function hide_delete_item(item){if(item==0){$('.multi-booking-modal-delete').hide();}else{$('.multi-booking-modal-delete').show();}}
function hide_add_item(item){if(item>=4){$('.multi-booking-modal-add').hide();}else{$('.multi-booking-modal-add').show();}}
function reset_room_count(){$('.multi-booking-modal-item').each(function(index,el){$(this).find('.reset-room-count').text(index+1);});}
function toogle_item_switchers(){hide_delete_item(count_item);hide_add_item(count_item);}
$('.booking-cancel').on('click',function(event){$('.multi-booking-modal').fadeOut(400);$('.multi-booking-modal').removeClass('multi-booking-submit');$('.input-col-multi-booking').toggleClass('hide');$('.hide-on-multi-booking').toggleClass('hide');$('#booking_form_main').attr('action',script_obj.site_url+'/room-search/');});$('.multi-booking-modal-add').on('click','span.item-trigger',function(event){var old='<div class="input-item quantity multi-booking-modal-count"><label for=""><input name="adult_multi[]" type="number" value="2"><div class="quantity-nav"><div class="quantity-button quantity-up"></div><div class="quantity-button quantity-down"></div></div></label></div>'
var child='<div class="input-item quantity multi-booking-modal-count"><label for=""><input name="child_multi[]" type="number" value="0"><div class="quantity-nav"><div class="quantity-button quantity-up"></div><div class="quantity-button quantity-down"></div></div></label></div>'
var mini='';var close='<div class="multi-booking-modal-delete"><i class="delete"></i></div>';if(count_item>5){return false;}else{$('<div class="multi-booking-modal-item multi-item-'+room_id+'" data-id="'+room_id+'"><span class="multi-booking-modal-item-title">Номер <i class="reset-room-count">'+count_item+'</i></span><span>Взрослых</span>'+old+'<span>Детей 2-11 лет</span>'+child+close+'</div>').appendTo('.multi-booking-modal-body');count('.multi-booking-modal-item.multi-item-'+room_id+' .quantity');room_id++;count_item++;reset_room_count();};add_multi_booking();toogle_item_switchers();});$('.multi-booking-modal-body').on('click','.multi-booking-modal-delete',function(event){$(this).each(function(index,el){$(this).closest('.multi-booking-modal-item').remove();});reset_room_count();toogle_item_switchers();add_multi_booking();});$('.multi-booking-modal-body').on('change','input[type=number]',function(event){add_multi_booking();});$('.booking-submit').on('click',function(event){$('.multi-booking-modal').addClass('multi-booking-submit');$('.multi-booking-modal').fadeOut(400);$('.input-col-multi-booking-change').fadeIn(400);$('#booking_form_main').attr('action',script_obj.site_url+'/room-search-multi/');});$('.input-col-multi-booking-change').on('click',function(event){$('.multi-booking-view').click();});$('.final-multibooking__next-room .button').each(function(index,el){var item=$(this);var tab_id=item.closest('.multi-booking-tab-item').attr('id');var tab_selector=$('a[href="#'+tab_id+'"]');var head_tab=$('.multi-booking-tab-head-item');item.on('click',function(event){tab_selector.closest(head_tab).next(head_tab).find('a').click();tab_selector.closest(head_tab).find('span').addClass('booking-done')});});});document.addEventListener('DOMContentLoaded',function(){new SmartPhoto(".js-img-viwer");});function initMap(){var mapWrappers=jQuery('.__google_map');if(mapWrappers.length==0)return false;mapWrappers.each(function(){var th=$(this),lat=Number(th.data('lat')),lng=Number(th.data('lng'));var map=new google.maps.Map(this,{center:{lat:lat,lng:lng},zoom:11,styles:[{"featureType":"all","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"all","elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#000000"},{"lightness":40}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#000000"},{"lightness":16}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":17},{"weight":1.2}]},{"featureType":"administrative.country","elementType":"labels.text.fill","stylers":[{"color":"#e5c163"}]},{"featureType":"administrative.locality","elementType":"labels.text.fill","stylers":[{"color":"#c4c4c4"}]},{"featureType":"administrative.neighborhood","elementType":"labels.text.fill","stylers":[{"color":"#e5c163"}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":21},{"visibility":"on"}]},{"featureType":"poi.business","elementType":"geometry","stylers":[{"visibility":"on"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#e5c163"},{"lightness":"0"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.highway","elementType":"labels.text.stroke","stylers":[{"color":"#e5c163"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":18}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#575757"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.stroke","stylers":[{"color":"#2c2c2c"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":16}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#999999"}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":19}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":17}]}]});var marker=new google.maps.Marker({position:{lat:lat,lng:lng},map:map,title:th.data('title')});});}